var ImgLazy=new Class({Implements:[Options],options:{range:0,attr:"data-url",selector:"img",container:window,isFade:true,model:"y",attrBg:"data-bg"},initialize:function(A){this.setOptions(A);this.container=document.id(this.options.container);this.elements=this.container.getElements?this.container.getElements(this.options.selector):document.getElements(this.options.selector);var B=function(){var E=this.container;var G=this.options.range;var C=this.options.model;var H=this.options.attr;var D=this.options.attrBg;var F=this.options.isFade;this.elements.each(function(M){var K=E.getScroll()[C];var O=E.getSize()[C]+G;var J=K+O;var N=M.getSize()[C];var P=M.getPosition()[C];var I=P+N;if((I>=K&&I<=J)||P<=J&&I>=J){var L=M.get(H);if(L){BBG.img.load(L,function(){if(M.get(D)&&M.get(D)=="lazyload"){M.setStyle("background-image","url("+L+")")}else{M.set("src",L)}M.erase(H);new Fx.Tween(M,{duration:500,transition:"bounce:out",link:"ignore",property:"opacity"}).start(0.6,1)})}}})}.bind(this);this.container.addEvent("resize",B);this.container.addEvent("scroll",B);B()}});